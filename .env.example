# =============================================================================
# VENDINHAS BACKEND - VARIÁVEIS DE AMBIENTE
# =============================================================================
# Copie este arquivo para .env e configure os valores
# Para gerar secrets: openssl rand -hex 32
# =============================================================================

# ===========================================
# SERVIDOR
# ===========================================
NODE_ENV=development                    # development | production | test
PORT=3001                               # Porta do servidor NestJS
CORS_ORIGIN=http://localhost:3000       # URL do frontend (produção: https://vendinhas.app)

# ===========================================
# BANCO DE DADOS (PostgreSQL)
# ===========================================
# Connection string do Prisma
DATABASE_URL="postgresql://vendapp_user:sua_senha@localhost:5432/vendapp_db?schema=vendinhas"

# Configurações individuais (usadas pelo Docker Compose)
POSTGRES_USER=vendapp_user
POSTGRES_PASSWORD=sua_senha_segura      # Gere com: openssl rand -base64 24
POSTGRES_DB=vendapp_db
POSTGRES_SCHEMA=vendinhas
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# ===========================================
# JWT (Autenticação)
# ===========================================
# Diretório das chaves RSA (RS256). Se não existirem, usa HS256 com JWT_SECRET
# Gerar chaves: openssl genrsa -out keys/private.pem 2048 && openssl rsa -in keys/private.pem -pubout -out keys/public.pem
JWT_KEYS_DIR=./keys
JWT_SECRET=gere_com_openssl_rand_hex_32           # Fallback para HS256
JWT_REFRESH_SECRET=gere_com_openssl_rand_hex_32   # Secret do refresh token
JWT_ACCESS_TOKEN_EXPIRES_IN=1d                     # Expiração do access token
JWT_REFRESH_TOKEN_EXPIRES_IN=7d                    # Expiração do refresh token

# ===========================================
# REDIS (Cache e Blacklist de Tokens)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=                         # Deixe vazio se não usar autenticação
REDIS_DB=0
REDIS_DEFAULT_TTL=3600                  # TTL padrão em segundos
REDIS_KEY_PREFIX=vendinhas:             # Prefixo das chaves no Redis

# ===========================================
# URLs DA APLICAÇÃO
# ===========================================
APP_URL=http://localhost:3001           # URL da API (produção: https://vendinhas.app/api)
FRONTEND_URL=http://localhost:3000      # URL do frontend (produção: https://vendinhas.app)

# ===========================================
# EMAIL (SMTP)
# ===========================================
# Para desenvolvimento: deixe em branco (emails serão logados no console)
# Para produção com Postfix local:
#   SMTP_HOST=localhost
#   SMTP_PORT=25
#   SMTP_USER= (vazio)
#   SMTP_PASS= (vazio)
# Para serviços externos (SendGrid, Mailgun, etc):
#   SMTP_HOST=smtp.sendgrid.net
#   SMTP_PORT=587
#   SMTP_USER=apikey
#   SMTP_PASS=sua_api_key
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@vendinhas.app         # Email remetente

# ===========================================
# UPLOAD DE ARQUIVOS
# ===========================================
UPLOAD_DIR=./uploads                    # Diretório de uploads (produção: /var/www/vendinhas/uploads)
UPLOAD_MAX_SIZE=5242880                 # Tamanho máximo em bytes (5MB)

# ===========================================
# STRIPE (Pagamentos) - Opcional
# ===========================================
# Obtenha as chaves em: https://dashboard.stripe.com/apikeys
# STRIPE_SECRET_KEY=sk_test_xxx         # Chave secreta
# STRIPE_WEBHOOK_SECRET=whsec_xxx       # Secret do webhook
# STRIPE_PRICE_PRO=price_xxx            # ID do preço do plano Pro
# STRIPE_PRICE_ENTERPRISE=price_xxx     # ID do preço do plano Enterprise

# ===========================================
# PAGSEGURO (Pagamentos) - Alternativa ao Stripe
# ===========================================
# PAGSEGURO_EMAIL=seu_email@pagseguro.com
# PAGSEGURO_TOKEN=seu_token
# PAGSEGURO_WEBHOOK_SECRET=seu_webhook_secret
# PAGSEGURO_SANDBOX=true                # true para sandbox, false para produção

# ===========================================
# RATE LIMITING (Proteção contra força bruta)
# ===========================================
# RATE_LIMIT_TTL=60                     # Janela de tempo em segundos
# RATE_LIMIT_MAX=100                    # Máximo de requisições por janela

# ===========================================
# BCRYPT (Hash de senhas)
# ===========================================
# BCRYPT_SALT_ROUNDS=10                 # Rounds do bcrypt (padrão: 10)